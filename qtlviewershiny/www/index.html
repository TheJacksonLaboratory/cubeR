<!DOCTYPE html>
<html>
    <head>
        <title>QTL Viewer</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description"
              content="">


	<link rel="stylesheet" href="static/js/bootstrap.min.css"/>
	<link rel="stylesheet" href="static/js/animate.min.css"/>
	<link rel="stylesheet" href="static/js/bootstrap-select.min.css"/>
	<link rel="stylesheet" href="static/js/jquery.dataTables.min.css"/>
	<link rel="stylesheet" href="static/js/dataTables.bootstrap4.min.css"/>
	<link rel="stylesheet" href="static/js/please-wait.css"/>
	<link rel="stylesheet" href="static/js/jquery.dynatable.css"/>
	<link rel="stylesheet" href="static/js/bootstrap-multiselect.css"/>
	<link rel="stylesheet" href="static/js/main.css"/>

	<script src="static/js/jquery-3.4.0.min.js"></script>
	<script src="static/js/popper.min.js"></script>
	<script src="static/js/bootstrap.min.js"></script>
	<script src="static/js/please-wait.js"></script>

	<script src="static/js/bootstrap-select.min.js"></script>
	<script src="static/js/ensimpl.js"></script>
	<script src="static/js/highstock.js"></script>
	<script src="static/js/highcharts-more.js"></script>
	<script src="static/js/xrange.js"></script>
	<script src="static/js/boost.js"></script>
	<script src="static/js/exporting.js"></script>
	<script src="static/js/offline-exporting.js"></script>
	<script src="static/js/jquery.dataTables.min.js"></script>
	<script src="static/js/dataTables.bootstrap4.min.js"></script>
	<script src="static/js/d3.v3.min.js"></script>
	<script src="static/js/d3-queue.v3.min.js"></script>
	<script src="static/js/d3-request.v1.min.js"></script>

    <!-- Extra //-->
    <script src="static/js/sweetalert2.all.js"></script>
    <script src="static/js/jquery.dynatable.js"></script>
    <script src="static/js/bootstrap-multiselect.js"></script>
    <script src="static/js/utilities.js"></script>
    <script src="static/js/message.js"></script>

    <!--  use this one for web  -->
    <script src="static/js/qtl.js"></script>

    <script src="shared/shiny.min.js"></script>

    </head>


<body>


<div class="inner">

    <nav id="dataSetSelectMenu" class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
        <a class="navbar-brand" href="#">QTL Viewer</a>
        <!-- will be filled in programatically //-->
    </nav>

    <div class="container-fluid">
        <main class="col-12" role="main">
            <div class="row">


                <div class="col-md-6 col-lg-5 col-xl-4">

                    <div class="row">
                        <div class="col">


                            <!-- Gene/Protein/Pheno selection //-->
                            <div class="card h-100">
                                <div class="card-header">
                                    <ul class="nav nav-tabs" role="tablist">
                                        <li class="nav-item">
                                            <a id="navPheno"
                                               class="nav-link"
                                               data-toggle="tab"
                                               href="#tabSearchPheno"><i class="fas fa-search"></i> Phenotypes</a>
                                        </li>
                                        <li class="nav-item">
                                            <a id="navGene"
                                               class="nav-link"
                                               data-toggle="tab"
                                               href="#tabSearchGene"><i class="fas fa-search"></i> Search</a>
                                        </li>
                                        <li class="nav-item">
                                            <a id="navLodPeaks"
                                               class="nav-link"
                                               data-toggle="tab"
                                               href="#tabLodPeaks"><i class="fas fa-th"></i> LOD Peaks</a>
                                        </li>
                                    </ul>
                                </div>

                                <div class="card-body">
                                    <div class="tab-content">
                                        <div class="tab-pane h-100" role="tabpanel" id="tabSearchPheno">

                                            <div class="row">
                                                <div class="col" id="searchPheno">
                                                </div>
                                            </div>

                                            <div class="row row-spacer"></div>

                                            <div class="row">
                                                <div class="col" id="searchPhenoCategoryText">
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col" id="searchPhenoCategory">
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col">
                                                    <div class="py-0" id="searchPhenoResultsInfo">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col results-wrapper">
                                                    <div id="searchPhenoResultsDiv"></div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="tab-pane h-100" role="tabpanel" id="tabSearchGene">
                                            <div class="row">
                                                <div class="col">
                                                    <div class="input-group">
                                                        <input type="text" id="searchTerm" name="searchTerm" class="form-control" placeholder="Please type a term to search for...">
                                                        <span class="input-group-append">
                                                            <button id="btnGo" class="btn btn-primary"><i class="fas fa-search"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col">
                                                    <div class="py-2" id="searchResultsTableInfo"></div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col">
                                                    <div id="searchResultsDiv"></div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="tab-pane h-100" role="tabpanel" id="tabLodPeaks">

                                            <div class="row">
                                                <div class="col">
                                                    <div id="divInteractiveCovariatesPeaks"></div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col">
                                                    <div id="divLODPeaks"></div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- end Gene/Protein/Pheno selection //-->

                        </div>
                    </div>

                    <div class="row row-spacer"></div>

                    <div class="row invisible" id="divProfileCorrelation">
                        <div class="col">

                            <div class="card h-100">
                                <div class="card-header" id="profilePlot">
                                    <ul id="infoTabs" class="nav nav-tabs" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="navProfile" data-toggle="tab" href="#tabProfile"><i class="fas fa-calculator"></i> Profile Plot</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="navCorrelation" data-toggle="tab" href="#tabCorrelation"><i class="fas fa-barcode"></i> Correlation</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="card-body">

                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane active" id="tabProfile">

                                            <div class="row" id="divProfilePlotOptions">

                                            </div>

                                            <div class="row" id="fact-svg-panel">
                                                <div class="col">
                                                    <div id="profilePlotChart"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div role="tabpanel" class="tab-pane" id="tabCorrelation">
                                            <div class="row">
                                                <div class="col font-weight-bold">
                                                    <span class="align-bottom">Select Correlation Dataset</span>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col" id="correlationDatasetSelection">
                                                </div>
                                            </div>

                                            <div class="row row-spacer"></div>

                                            <div class="row">
                                                <div class="col font-weight-bold" id="correlationCovariateSelectionText">
                                                    <span class="align-bottom">Covariate Adjustment</span>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col" id="correlationCovariateSelection">
                                                </div>
                                            </div>

                                            <div class="row row-spacer"></div>

                                            <div class="row">
                                                <div class="col" id="correlationDataTable">
                                                </div>
                                            </div>

                                            <div class="row row-spacer"></div>

                                            <div class="row">
                                                <div class="col">
                                                    <button id="btnDownloadCorrelationData" type="button" class="btn btn-sm btn-flat btn-primary">
                                                        <i class="fas fa-download"></i> Download Correlations</button>
                                                </div>
                                            </div>

                                            <div class="row row-spacer"></div>

                                            <div class="row">
                                                <div class="col">
                                                    Select an ID from above to plot the correlation data.
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col" id="correlationDataPlot">
                                                    <div id="plotCorrelation"></div>
                                                </div>
                                            </div>

                                            <div class="row row-spacer"></div>

                                            <div class="row">
                                                <div class="col font-weight-bold">
                                                    Select a series to color
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col" id="divFactorSeriesCorrelation">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- end Correlation //-->


                        </div>
                    </div>
                </div>

                <!-- Second column //-->

                <div class="col-md-6 col-lg-7 col-xl-8">

                    <!-- LOD Scan section //-->

                    <!-- only display at first, remove after a succesful selection //-->
                    <div class="row" id="divWelcomeMesage">
                        <div class="col">
                            <div class="jumbotron jumbotron-fluid" style="background: none">
                                <div class="container">
                                    <h1 class="display-3">QTL Viewer</h1>
                                    <p class="lead">Please search for a term of interest.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row invisible" id="divItemInfo">
                        <div class="col">
                            <div class="card">
                                <div class="card-header">
                                    <a class="collapsed" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                                    <i class="fa" aria-hidden="true"></i>
                                    <span id="div_current_item_information_header"></span>
                                    </a>
                                </div>
                                <div class="card-body collapse" id="collapseExample">
                                    <div id="div_current_item_information_body"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row invisible" id="divLOD">
                        <div class="col">
                            <div class="card h-100">
                                <div class="card-header" id="lod">
                                    <i class="fas fa-chart-area"></i> LOD Plot
                                </div>
                                <div class="card-body">

                                    <div class="row">
                                        <div class="col">
                                            <div id="divInteractiveCovariatesLOD"></div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col">
                                            <div id="lodPlotChart"></div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col">
                                            <div id="lodPlotChartCovariateFull"></div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col">
                                            <div id="lodPlotChartCovariateDiff"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- end LOD Scan section //-->

                    <div class="row row-spacer"></div>

                    <div class="row invisible" id="divSecondRow">



                        <!-- Secondary plots //-->

                        <div class="col">
                            <div class="card" id="secondaryPlots">
                                <div class="card-header">
                                    <ul id="secondaryPlotTabs" class="nav nav-tabs" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="navPlotEffect" data-toggle="tab" href="#tabPlotEffect"><i class="fas fa-chart-line"></i> Effect</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="navPlotMediation" data-toggle="tab" href="#tabPlotMediation"><i class="far fa-calendar-alt fa-rotate-180"></i> Mediation</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="navPlotSNPs" data-toggle="tab" href="#tabPlotSNPs"><i class="fas fa-signal fa-rotate-90"></i> SNP Association</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="card-body">
                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane active" id="tabPlotEffect">
                                            <div class="row">
                                                <div class="col">
                                                    <div class="custom-control custom-switch">
                                                        <input type="checkbox" class="custom-control-input" id="performBLUP">
                                                        <label class="custom-control-label" for="performBLUP">Best Linear Unbiased Predictors (BLUPs)</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row no-gutters">
                                                <div class="col" id="allEffectPlots">
                                                </div>
                                            </div>
                                        </div>
                                        <div role="tabpanel" class="tab-pane" id="tabPlotMediation">
                                            <div class="row">
                                                <div class="col" id="divMediationSelect">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <div id="plotMediation"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div role="tabpanel" class="tab-pane" id="tabPlotSNPs">
                                            <div class="row" id="snpWindowMenu">
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <div id="plotSNPAssocSNPS"></div>
                                                    <div id="plotSNPAssocGenes"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- end Secondary plots //-->

                    </div>
                </div>
                <!-- end Second column //-->

            </div>

        </main>
    </div>

<!-- make some nice circles //-->
<div id="ap" class="invisible">
<svg class="lds-curve-bars" width="200px"  height="200px"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background: rgba(0, 0, 0, 0) none repeat scroll 0% 0%;"><g transform="translate(50,50)">
</circle><circle cx="0" cy="0" r="18" fill="none" stroke="#1aafd0" stroke-width="1" stroke-dasharray="52 52">
<animateTransform attributeName="transform" type="rotate" values="0 0 0;360 0 0" times="0;1" dur="1.4s" calcMode="spline" keySplines="0.2 0 0.8 1" begin="-0.2" repeatCount="indefinite"></animateTransform>
</circle><circle cx="0" cy="0" r="22" fill="none" stroke="#6a67ce" stroke-width="1" stroke-dasharray="78 78">
<animateTransform attributeName="transform" type="rotate" values="0 0 0;360 0 0" times="0;1" dur=".8s" calcMode="spline" keySplines="0.2 0 0.8 1" begin="-0.4" repeatCount="indefinite"></animateTransform>
</circle><circle cx="0" cy="0" r="26" fill="none" stroke="#ffb900" stroke-width="1" stroke-dasharray="104 104">
<animateTransform attributeName="transform" type="rotate" values="0 0 0;360 0 0" times="0;1" dur="1s" calcMode="spline" keySplines="0.2 0 0.8 1" begin="-0.6" repeatCount="indefinite"></animateTransform>
</circle><circle cx="0" cy="0" r="30" fill="none" stroke="#fc636b" stroke-width="1" stroke-dasharray="130 130">
<animateTransform attributeName="transform" type="rotate" values="0 0 0;360 0 0" times="0;1" dur="1.2s" calcMode="spline" keySplines="0.2 0 0.8 1" begin="-0.8" repeatCount="indefinite"></animateTransform>
</circle></g></svg>
</div>

<!-- for determining font size //-->
<div class="invisible">
    <svg version="1.1" class="highcharts-root" style="font-family:-apple-system, system-ui, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;font-size: 15px;" xmlns="http://www.w3.org/2000/svg" width="727" height="800" viewBox="0 0 727 800" class="invisible">
        <g class="highcharts-data-labels highcharts-series-1 highcharts-xrange-series highcharts-tracker " visibility="hidden">
            <g class="highcharts-label highcharts-data-label highcharts-data-label-color-0">
                <text id="getTheFontSize" x="5" style="font-size:11px;font-weight:bold;color:white;fill:white;" y="16">
                    <tspan id="val1" x="5" y="16" class="highcharts-text-outline" fill="#000000" stroke="#000000" stroke-width="2px" stroke-linejoin="round" style="">TEST</tspan>
                    <tspan id="val2" x="5" y="16">TEST</tspan>
                </text>
            </g>
        </g>
    </svg>
</div>


<!-- Main Footer -->
<nav class="navbar fixed-bottom navbar-dark bg-dark">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <span class="text-muted">
            <strong>Created by <a href="http://churchill-lab.jax.org">The Churchill Lab</a>.</strong>
        </span>
      </li>
    </ul>
    <ul class="navbar-nav navbar-expand-sm ml-auto">

        <li class="nav-item pr-5">
            <strong><a class="text-light" href="/rdata"><i class="fas fa-file-download"></i> Download Data</a></strong>
        </li>
        <li class="nav-item">
            <span class="text-light">v</span>
        </li>
    </ul>
</nav>
<!-- end Main Footer -->
</div>

<input type="button" value="Go" onclick="init();"/>

</body>
</html>
